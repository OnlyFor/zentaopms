var Y=(e,t,a)=>new Promise((r,l)=>{var n=f=>{try{h(a.next(f))}catch(b){l(b)}},x=f=>{try{h(a.throw(f))}catch(b){l(b)}},h=f=>f.done?r(f.value):Promise.resolve(f.value).then(n,x);h((a=a.apply(e,t)).next())});import{d as G,v as g,R as z,cb as ue,X as _e,o as c,m as p,cc as de,cd as ve,ce as ee,cf as pe,a as me,cg as ge,ch as fe,ci as he,cj as ye,j as te,al as Ce,a5 as be,y as ke,r as L,c as I,ab as m,z as d,e as O,f as o,w as $,F as M,A as F,t as E,D as Oe,E as Se,ck as Ee,c1 as Ie,u as xe,a3 as De,aH as Le,a1 as w,bG as Te,bP as Ae,ad as we}from"./index.js";import{C as Ne}from"./index-23f3a5f2.js";import{h as Pe,l as Re,u as $e,i as q,j as ze,k as Me,E as J,g as ne,p as Fe,P as N,m as P}from"./useSync.hook-b70cc94b.js";import{i as se}from"./icon-a70ceed8.js";const Ue={class:"list-img",alt:"\u56FE\u8868\u56FE\u7247"},X=G({__name:"index",props:{chartConfig:{type:Object,required:!0}},setup(e){const t=e,a=g(""),r=()=>Y(this,null,function*(){a.value=yield Pe(t.chartConfig)});return z(()=>t.chartConfig.key,()=>r(),{immediate:!0}),(l,n)=>{const x=ue("lazy");return _e((c(),p("img",Ue,null,512)),[[x,a.value]])}}});function Be(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Ge=Be;function Ke(e,t,a){var r=-1,l=e.length;t<0&&(t=-t>l?0:l+t),a=a>l?l:a,a<0&&(a+=l),l=t>a?0:a-t>>>0,t>>>=0;for(var n=Array(l);++r<l;)n[r]=e[r+t];return n}var He=Ke,Ve=de,je=He;function Ye(e,t){return t.length<2?e:Ve(e,je(t,0,-1))}var qe=Ye,Je=ee,Xe=Ge,Qe=qe,We=ve;function Ze(e,t){return t=Je(t,e),e=Qe(e,t),e==null||delete e[We(Xe(t))]}var et=Ze,tt=pe;function nt(e){return tt(e)?void 0:e}var st=nt,at=me,ot=ye,lt=et,ct=ee,it=ge,rt=st,ut=fe,_t=he,dt=1,vt=2,pt=4,mt=ut(function(e,t){var a={};if(e==null)return a;var r=!1;t=at(t,function(n){return n=ct(n,e),r||(r=n.length>1),n}),it(e,_t(e),a),r&&(a=ot(a,dt|vt|pt,rt));for(var l=t.length;l--;)lt(a,t[l]);return a}),gt=mt;const ft=e=>(Oe("data-v-4c2515b6"),e=e(),Se(),e),ht={class:"go-chart-common"},yt={key:0,class:"charts"},Ct={class:"tree-top"},bt=ft(()=>d("span",null,"\u6240\u6709\u5206\u7EC4",-1)),kt={class:"tree-body"},Ot={class:"chapter chapter-first"},St=["title"],Et={class:"label-count"},It=["onDragstart"],xt=["title"],Dt={key:1,class:"chapter chapter-last"},Lt=["title"],Tt={class:"label-count"},At=["onDragstart"],wt=["title"],Nt={key:1,class:"no-charts"},Pt={class:"chart-content-list"},Rt=G({__name:"index",props:{selectOptions:{type:Object,default:()=>{}},menu:{type:String,default:()=>{}}},setup(e){const t=e,a=Re(()=>Ce(()=>import("./index-e7d5deb7.js"),["static/js/index-e7d5deb7.js","static/css/index-f25f4c30.css","static/js/index-3f13189b.js","static/css/index-2ce6d63c.css","static/js/index.js","static/css/index-c34cea1e.css","static/js/icon-a70ceed8.js","static/js/useSync.hook-b70cc94b.js","static/css/useSync.hook-6c2bb01a.css","static/js/tables_list-992ce806.js","static/js/plugin-b98bf57c.js","static/js/index-23f3a5f2.js","static/css/index-3e214e52.css"])),{ChevronUpOutlineIcon:r,ChevronDownOutlineIcon:l}=se.ionicons5,n=$e(),x=g(n.getDimensions),h=g(n.getDimension),f=g(n.getScopeList),b=g(n.getScope);z(()=>n.getDimensions,()=>{x.value=n.getDimensions,h.value=n.getDimension}),z(()=>n.getScopeList,()=>{f.value=n.getScopeList,b.value=n.getScope});const T=be(()=>{const i=n.getTreeData,{chart:s,pivot:y,metric:D}=i;return s&&t.menu=="Charts"?s[h.value]:y&&t.menu=="Tables"?y[h.value]:D&&t.menu=="Metrics"?D[b.value]:[]}),A=g(!1),k=g([]),ae=()=>{A.value=!A.value;for(const i in T.value){k.value[T.value[i].id]=A.value;for(const s in T.value[i].child)k.value[T.value[i].child[s].id]=A.value}},K=i=>{k.value[i]=!k.value[i]};let _=ke({menuOptions:[],selectOptions:{},categorys:{all:[]},categoryNames:{all:"\u6240\u6709"},categorysNum:0,saveSelectOptions:{}});const U=g(),oe=i=>{for(const s in i){_.selectOptions=i[s];break}};z(()=>t.selectOptions,i=>{if(_.categorysNum=0,!!i){i.list.forEach(s=>{const y=_.categorys[s.category];_.categorys[s.category]=y&&y.length?[...y,s]:[s],_.categoryNames[s.category]=s.categoryName,_.categorys.all.push(s)});for(const s in _.categorys)_.categorysNum+=1,_.menuOptions.push({key:s,label:_.categoryNames[s]});oe(_.categorys),U.value=_.menuOptions[0].key}},{immediate:!0});const le=i=>{_.selectOptions=_.categorys[i]},H=(i,s)=>{q(s.chartKey,ze(s)),q(s.conKey,Me(s)),i.dataTransfer.setData(Ee.DRAG_KEY,Ie(gt(s,["image"]))),n.setEditCanvas(J.IS_CREATE,!0)},V=()=>{n.setEditCanvas(J.IS_CREATE,!1)};return(i,s)=>{const y=L("n-select"),D=L("n-icon"),j=L("n-scrollbar"),ce=L("n-menu");return c(),p("div",ht,[e.menu=="Charts"||e.menu=="Tables"||e.menu=="Metrics"?(c(),p("div",yt,[e.menu=="Charts"||e.menu=="Tables"?(c(),I(y,{key:0,class:"dimension-btn",value:h.value,"onUpdate:value":s[0]||(s[0]=v=>h.value=v),options:x.value},null,8,["value","options"])):m("",!0),e.menu=="Metrics"?(c(),I(y,{key:1,class:"dimension-btn",value:b.value,"onUpdate:value":s[1]||(s[1]=v=>b.value=v),options:f.value},null,8,["value","options"])):m("",!0),d("div",Ct,[bt,O(D,{size:"16",component:A.value?o(r):o(l),onClick:ae},null,8,["component"])]),d("div",kt,[O(j,null,{default:$(()=>[(c(!0),p(M,null,F(o(T),(v,Xt)=>(c(),p("div",{key:v.id,class:"tree-item"},[d("div",null,[d("div",Ot,[O(D,{size:"16",component:k.value[v.id]?o(r):o(l),onClick:u=>K(v.id)},null,8,["component","onClick"]),d("label",{title:v.title,class:"text-nowrap label-title"},E(v.title),9,St),d("label",Et,E(v.count),1)]),v.child&&k.value[v.id]?(c(!0),p(M,{key:0},F(v.child,u=>(c(),p("div",{class:"tree-child",key:u.id},[u.type!="chapter"?(c(),p("div",{key:0,class:"item-box",draggable:"true",onDragstart:C=>H(C,u.chartConfig),onDragend:V},[u.chartConfig.image?(c(),I(o(X),{key:0,class:"list-img",chartConfig:u.chartConfig},null,8,["chartConfig"])):m("",!0),d("span",{title:u.title},E(u.title),9,xt)],40,It)):m("",!0),u.type=="chapter"?(c(),p("div",Dt,[O(D,{size:"16",component:k.value[u.id]?o(r):o(l),onClick:C=>K(u.id)},null,8,["component","onClick"]),d("label",{title:u.title,class:"text-nowrap"},E(u.title),9,Lt),d("label",Tt,E(u.child.length),1)])):m("",!0),u.child&&k.value[u.id]?(c(!0),p(M,{key:2},F(u.child,(C,ie)=>(c(),p("div",{class:"tree-child",key:ie},[C.type!="chapter"?(c(),p("div",{key:0,class:"item-box",draggable:"true",onDragstart:re=>H(re,C.chartConfig),onDragend:V},[C.chartConfig.image?(c(),I(o(X),{key:0,class:"list-img",chartConfig:C.chartConfig},null,8,["chartConfig"])):m("",!0),d("p",{title:C.title,class:"text-nowrap"},E(C.title),9,wt)],40,At)):m("",!0)]))),128)):m("",!0)]))),128)):m("",!0)])]))),128))]),_:1})])])):m("",!0),e.menu!="Charts"&&e.menu!="Tables"&&e.menu!="Metrics"?(c(),p("div",Nt,[O(ce,{class:"chart-menu-width",value:U.value,"onUpdate:value":[s[2]||(s[2]=v=>U.value=v),le],options:o(_).menuOptions,"icon-size":16,indent:18},null,8,["value","options"]),d("div",Pt,[O(j,null,{default:$(()=>[O(o(a),{menuOptions:o(_).selectOptions},null,8,["menuOptions"])]),_:1})])])):m("",!0)])}}});var $t=te(Rt,[["__scopeId","data-v-4c2515b6"]]);const zt=xe(),Mt=g(zt.getAppTheme);ne();const{getCharts:Ft}=De(ne()),Ut=Le({id:"usePackagesStore",state:()=>({packagesList:Object.freeze(Fe)}),getters:{getPackagesList(){return this.packagesList}}}),{TableSplitIcon:Bt,RoadmapIcon:Gt,SpellCheckIcon:Kt,GraphicalDataFlowIcon:Q}=se.carbon,{getPackagesList:W}=Ut(),S=[],Z={[N.CHARTS]:{icon:w(Gt),label:P.CHARTS},[N.INFORMATIONS]:{icon:w(Kt),label:P.INFORMATIONS},[N.TABLES]:{icon:w(Bt),label:P.TABLES},[N.DECORATES]:{icon:w(Q),label:P.DECORATES},[N.METRICS]:{icon:w(Q),label:P.METRICS}},Ht=()=>{for(const e in W)S.push({key:e,icon:Z[e].icon,label:Z[e].label,list:W[e]})};Ht();S[0].key;const R=g(S[0].key),B=g(S[0]),Vt=e=>{for(const t in S)S[t].key==e&&(B.value=S[t])};const jt={class:"menu-width-box"},Yt={class:"menu-component-box"},qt=G({__name:"index",setup(e){return Te(t=>({"7563b37f":o(Mt)})),(t,a)=>{const r=L("n-tab-pane"),l=L("n-tabs");return c(),I(o(Ne),{class:we(["go-content-charts",{scoped:!o(Ft)}]),backIcon:!1},{default:$(()=>[d("aside",null,[d("div",jt,[O(l,{value:o(R),"onUpdate:value":[a[0]||(a[0]=n=>Ae(R)?R.value=n:null),o(Vt)],class:"tabs-box",size:"small",type:"segment"},{default:$(()=>[(c(!0),p(M,null,F(o(S),n=>(c(),I(r,{key:n.key,name:n.key,size:"small","display-directive":"show:lazy"},{tab:$(()=>[d("span",null,E(n.label),1)]),_:2},1032,["name"]))),128))]),_:1},8,["value","onUpdate:value"]),d("div",Yt,[o(B)?(c(),I(o($t),{selectOptions:o(B),menu:o(R),key:o(R)},null,8,["selectOptions","menu"])):m("",!0)])])])]),_:1},8,["class"])}}});var Jt=te(qt,[["__scopeId","data-v-7ab8059c"]]),nn=Object.freeze(Object.defineProperty({__proto__:null,default:Jt},Symbol.toStringTag,{value:"Module"}));export{X as _,nn as i,gt as o};
